### 환불하기

결제 완료 건의 결제 금액 중 일부 또는 전부를 구매자에게 돌려줍니다. (환불 요청에 성공하는 즉시 구매자의 계좌로 요청하신 금액이 입금되며, 환불한 금액은 상점의 다음 정산에 반영됩니다)

아래 예제는 결제 환불 API 가 지원하는 모든 파라미터를 사용한 코드입니다.

```curl
curl "https://toss.im/tosspay/api/v1/refunds" \
-H "content-Type: application/json" \
-d '{
"apiKey":"sk_test_apikey1234567890a",    # 상점의 API Key (필수)
"payToken":"test_token1234567890a",                  # 결제 고유 번호 (필수)
"amount":10000                              # 환불할 금액
"amountTaxable":5000,                       # 환불할 금액 중 과세금액
"amountTaxFree":4000,                       # 환불할 금액 중 비과세금액
"amountVat":500,                            # 환불할 금액 중 부가세
"amountServiceFee":500,                     # 환불할 금액 중 봉사료
}'
```

#### 결제 환불 API 의 Endpoint

POST https://toss.im/tosspay/api/v1/refunds

#### 필수 Parameters

'결제 취소'와 마찬가지로 필수 파라미터는 딱 2 가지 입니다. '어느 가맹점'에서 '어떤 결제건'을 환불하는지만 알려주세요!

1. **상점 API Key** : 결제를 생성한 상점의 API key 가 필요합니다.
2. **결제 고유 토큰 (payToken)** : 결제 생성 완료 후 받은 결제 고유번호

#### 환불할 금액

총 결제 금액 중 일부만 환불하고자 하는 경우, 이 파라미터 값을 설정해주세요. 금액을 설정하지 않으면 결제 금액 전액을 환불합니다.
(단, 에스크로 보호 중인 결제는 전체 금액 환불만 가능합니다)

#### 복합과세 결제 환불 처리

결제 생성 시, 세부 금액 구성(과세금액/비과세금액/부가세/봉사료)을 지정했다면, 환불 요청 시에도 반드시 어떤 부분에서 환불 처리할지 지정해야 합니다.

환불 요청하는 금액은 '남은 결제 금액'보다 작거나 같아야 하고, 환불할 세부 금액들의 총합은 반드시 전체 환불 금액(amount)과 동일해야 합니다. (다를 시 에러 발생)
